<p-sidebar
  [(visible)]="visible"
  position="bottom"
  [modal]="false"
  [showCloseIcon]="false"
  [baseZIndex]="10000"
  styleClass="p-0"
>
  <div class="fixed bottom-0 left-0 right-0 bg-white border-top-1 p-4">
    <!-- Área para arrastrar -->
    <div
      #dragHandle
      class="drag-handle w-full flex flex-column align-items-center cursor-grab mb-2"
    >
      <div class="drag-indicator"></div>
    </div>

    <div class="flex justify-content-between align-items-center mb-4">
      <h2 class="text-lg font-semibold m-0">Total a pagar</h2>
      <button
        pButton
        icon="pi {{ isExpanded ? 'pi-chevron-down' : 'pi-chevron-up' }}"
        class="p-button-text p-button-sm"
        (click)="toggleExpanded()"
      ></button>
    </div>

    <div *ngIf="isExpanded" class="mb-4">
      <div class="flex justify-content-between mb-2">
        <span>Subtotal</span>
        <span>${{ detalles.subtotal.toFixed(2) }}</span>
      </div>
      <div class="flex justify-content-between mb-2">
        <span>Impuestos</span>
        <span>${{ detalles.impuestos.toFixed(2) }}</span>
      </div>
      <div class="flex justify-content-between mb-2">
        <span>Envío</span>
        <span>${{ detalles.envio.toFixed(2) }}</span>
      </div>
      <div class="border-top-1 pt-2 mt-2">
        <div class="flex justify-content-between font-semibold">
          <span>Total</span>
          <span>${{ total.toFixed(2) }}</span>
        </div>
      </div>
    </div>

    <div
      *ngIf="!isExpanded"
      class="flex justify-content-between align-items-center mb-4"
    >
      <span class="font-semibold">Total</span>
      <span class="font-semibold">${{ total.toFixed(2) }}</span>
    </div>

    <button pButton label="Proceder al pago" class="w-full"></button>
  </div>
</p-sidebar>
